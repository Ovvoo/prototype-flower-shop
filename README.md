# 🌸 Платформа E-Commerce для Цветочного Салона
## Архитектура проекта и технологический стек

> **Цель**: Функциональный дизайн-прототип для демонстрации заказчику
> **Статус**: Визуализация архитектуры и этап планирования

---

## 📚 Документация проекта

**Полная документация доступна в директории `/docs/`:**

- 📖 **[INDEX.md](docs/INDEX.md)** - Главный индекс всей документации
- ✅ **[COMPLETED_TASKS.md](docs/COMPLETED_TASKS.md)** - Журнал выполненных задач (Фазы 0-2)
- 📋 **[BACKLOG.md](docs/BACKLOG.md)** - Бэклог оставшихся задач (42 задачи, 11 Epic)
- 📁 **[FILE_STRUCTURE.md](docs/FILE_STRUCTURE.md)** - Полная файловая структура проекта
- 📊 **[PROGRESS.md](docs/PROGRESS.md)** - Текущий прогресс разработки (52%)
- 🗄️ **[DATABASE_SCHEMA.md](docs/DATABASE_SCHEMA.md)** - Схема базы данных (12 таблиц)
- 🔌 **[API_SPEC.md](docs/API_SPEC.md)** - Спецификация API (~30 endpoints)

> 💡 **Для быстрого старта**: начните с [docs/INDEX.md](docs/INDEX.md)

---

## 📋 Содержание

1. [Технологический стек](#-технологический-стек)
2. [Системная архитектура](#-системная-архитектура)
3. [Функциональные модули](#-функциональные-модули)
4. [Структура проекта](#-структура-проекта)
5. [Дизайн-тренды 2026](#-дизайн-тренды-2026)
6. [Дорожная карта разработки](#-дорожная-карта-разработки)

---

## 🛠 Технологический стек

### Frontend слой
```
┌─────────────────────────────────────────────────────────────┐
│                    ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС                │
├─────────────────────────────────────────────────────────────┤
│  React 18+        │  Next.js 14+      │  TypeScript         │
│  Компонентный     │  Server & Client  │  Строгая типизация  │
│  ⚛️  Современный  │  🚀 Производит.   │  📘 Безопасность   │
├─────────────────────────────────────────────────────────────┤
│  Tailwind CSS     │  shadcn/ui        │  Framer Motion      │
│  Utility-first    │  Доступные комп.  │  Плавные анимации   │
│  🎨 Адаптивный    │  ♿ ARIA готово   │  ✨ Взаимодействие │
└─────────────────────────────────────────────────────────────┘
```

**Почему именно этот стек?**
- **React 18+**: Concurrent режим для плавной загрузки изображений цветов
- **Next.js 14+**: SSR для быстрого первого рендера + SEO оптимизация
- **TypeScript**: Предотвращение ошибок в заказах и оплате
- **Tailwind CSS**: Быстрая кастомизация под фирменный стиль салона
- **shadcn/ui**: Готовые доступные компоненты (важно для всех возрастов 25-55 лет)
- **Framer Motion**: Премиум анимации для luxury-ощущения

### Backend слой
```
┌─────────────────────────────────────────────────────────────┐
│                      СЕРВЕРНАЯ ЛОГИКА                        │
├─────────────────────────────────────────────────────────────┤
│  Next.js API      │  tRPC             │  Zod                │
│  Route handlers   │  Type-safe APIs   │  Валидация схем     │
│  🔧 Serverless    │  🔒 Тип.проверка  │  ✅ Безопасность   │
├─────────────────────────────────────────────────────────────┤
│  PostgreSQL       │  Prisma ORM       │  Redis Cache        │
│  Реляционная БД   │  Тип.безопасность │  Кэш сессий         │
│  🗄️  ACID         │  🔄 Миграции      │  ⚡ Быстрый доступ │
└─────────────────────────────────────────────────────────────┘
```

**Преимущества для бизнеса:**
- **tRPC**: Полная type-safety между фронтом и бэком — 0 ошибок в API
- **PostgreSQL**: Надёжное хранение заказов и транзакций
- **Prisma**: Автоматическая генерация TypeScript типов из БД
- **Redis**: Кэширование популярных товаров для скорости < 2 сек

### Инфраструктура и сервисы
```
┌─────────────────────────────────────────────────────────────┐
│                     ОБЛАЧНЫЕ СЕРВИСЫ                         │
├─────────────────────────────────────────────────────────────┤
│  Vercel           │  Supabase         │  Cloudflare R2      │
│  Хостинг и деплой │  БД + Авторизация │  Хранение фото      │
│  🌐 Edge сеть     │  🔐 Auth готов    │  📦 CDN доставка   │
├─────────────────────────────────────────────────────────────┤
│  ЮKassa/Stripe    │  Resend           │  Twilio SMS         │
│  Платёжный шлюз   │  Email сервис     │  Уведомления        │
│  💳 Безопасная    │  📧 Транзакции    │  📱 SMS алерты     │
└─────────────────────────────────────────────────────────────┘
```

**Российский рынок:**
- **ЮKassa** (primary) + **Stripe** (fallback) — покрытие всех способов оплаты
- **SMS.ru** или **Twilio** — SMS уведомления о доставке
- **Vercel** — автоматический деплой при git push, SSL из коробки

### Инструменты разработки
```
┌─────────────────────────────────────────────────────────────┐
│                  ОПЫТ РАЗРАБОТЧИКА                           │
├─────────────────────────────────────────────────────────────┤
│  pnpm             │  ESLint           │  Prettier           │
│  Быстрый пакет.   │  Качество кода    │  Форматирование     │
│  ⚡ Скорость      │  🔍 Линтинг       │  ✨ Консистентность│
├─────────────────────────────────────────────────────────────┤
│  Husky            │  Jest & Playwright│  GitHub Actions     │
│  Git хуки         │  Тестирование     │  CI/CD pipeline     │
│  🪝 Pre-commit    │  🧪 Проверки      │  🤖 Автоматизация  │
└─────────────────────────────────────────────────────────────┘
```

---

## 🏗 Системная архитектура

```
┌────────────────────────────────────────────────────────────────┐
│                      УСТРОЙСТВА КЛИЕНТОВ                        │
│   📱 Мобильные (70% заказов!)  💻 Десктоп  🖥️ Планшеты       │
└────────────────┬───────────────────────────────────────────────┘
                 │
                 ▼
┌────────────────────────────────────────────────────────────────┐
│                    CDN / EDGE СЕТЬ                              │
│              Vercel Edge · Cloudflare CDN                       │
│         🌍 Глобальная доставка · ⚡ < 100мс RTT                │
└────────────────┬───────────────────────────────────────────────┘
                 │
                 ▼
┌────────────────────────────────────────────────────────────────┐
│                     FRONTEND СЛОЙ                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │  React App   │  │   Next.js    │  │   Routing    │         │
│  │  Компоненты  │  │  SSR & ISR   │  │  App Router  │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│                                                                  │
│  🎨 Дизайн-система: shadcn/ui + Tailwind                       │
│  📦 Оптимизация изображений: next/image (WebP + fallback)      │
│  ⚡ Lazy loading: React.lazy + Suspense                        │
└────────────────┬───────────────────────────────────────────────┘
                 │
                 ▼
┌────────────────────────────────────────────────────────────────┐
│                      API СЛОЙ                                   │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │   tRPC API   │  │  REST APIs   │  │  Webhooks    │         │
│  │ Type-safe TS │  │ Публичный API│  │ Внешние (ЮК)│         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│                                                                  │
│  🔐 Защита: Rate limiting · CORS · CSRF tokens                 │
└────────────────┬───────────────────────────────────────────────┘
                 │
                 ▼
┌────────────────────────────────────────────────────────────────┐
│                   БИЗНЕС-ЛОГИКА                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │   Товары     │  │    Заказы    │  │    Оплата    │         │
│  │   Каталог    │  │  Обработка   │  │  Обработка   │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │   Корзина    │  │     Auth     │  │     CMS      │         │
│  │ Управление   │  │ Безопасность │  │   Контент    │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│                                                                  │
│  📊 Аналитика: События · Воронка продаж · A/B тесты            │
└────────────────┬───────────────────────────────────────────────┘
                 │
                 ▼
┌────────────────────────────────────────────────────────────────┐
│                    СЛОЙ ДАННЫХ                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │  PostgreSQL  │  │  Redis Cache │  │ Файловое     │         │
│  │   Database   │  │   Сессии     │  │ хранилище    │         │
│  │              │  │   Корзины    │  │ (Фото цветов)│         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│                                                                  │
│  🗄️  Схема: Товары · Заказы · Клиенты · Платежи · Отзывы     │
└────────────────┬───────────────────────────────────────────────┘
                 │
                 ▼
┌────────────────────────────────────────────────────────────────┐
│                 ВНЕШНИЕ СЕРВИСЫ                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │   ЮKassa     │  │    Resend    │  │   SMS.ru     │         │
│  │   Платежи    │  │    Email     │  │     SMS      │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │  1C (опция)  │  │   Dadata     │  │ Google Maps  │         │
│  │Синх. товаров │  │ Подсказки    │  │ Карта доставки│        │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
└────────────────────────────────────────────────────────────────┘
```

**Ключевые преимущества архитектуры:**
- **Edge-first**: Контент отдаётся с ближайшего сервера (CDN)
- **SSR + ISR**: Быстрая первая загрузка + автообновление каталога
- **Type-safety**: От БД до UI — TypeScript предотвращает 90% багов
- **Масштабируемость**: Serverless функции автоматически масштабируются под нагрузку

---

## 🧩 Функциональные модули

### 1. 🛍️ Модуль каталога товаров
**Назначение**: Отображение и управление ассортиментом

```
Функции:
├─ 📂 Древовидная структура категорий
│  ├─ Букеты (свадебные, романтические, праздничные)
│  ├─ Комнатные растения (суккуленты, орхидеи, фикусы)
│  ├─ Подарочные наборы (цветы + шоколад, вино, игрушки)
│  └─ Сопутствующие товары (вазы, открытки, упаковка)
│
├─ 🔍 Расширенная фильтрация
│  ├─ По категории (5-10 основных)
│  ├─ По цене (от-до с ползунком)
│  ├─ По типу цветов (розы, тюльпаны, лилии...)
│  ├─ По поводу (свадьба, день рождения, юбилей, соболезнования)
│  ├─ По цветовой гамме (красный, белый, розовый, микс)
│  └─ По наличию (в наличии / под заказ)
│
├─ 📊 Сортировка
│  ├─ По популярности (на основе продаж)
│  ├─ По цене (возрастание/убывание)
│  ├─ По новизне (свежие поступления)
│  └─ По рейтингу (отзывы клиентов)
│
├─ 🖼️ Карточки товаров
│  ├─ Основное фото (hover → второе фото)
│  ├─ Название, цена, скидка
│  ├─ Быстрые кнопки: "В корзину" / "Быстрый просмотр"
│  └─ Бейджи: "Хит", "Новинка", "Скидка -20%"
│
├─ ⚡ Быстрый просмотр
│  ├─ Модальное окно без перехода на страницу
│  ├─ Галерея 3-5 фото
│  └─ Кнопка "Подробнее" → полная карточка
│
└─ 📄 Пагинация / Бесконечная прокрутка
   ├─ 12-24-48 товаров на странице
   └─ Lazy loading для производительности

Технологии:
├─ React компоненты с TypeScript
├─ TanStack Query для кэширования данных
├─ Zustand для состояния фильтров
├─ Intersection Observer API для lazy loading
└─ Debouncing для поиска (300ms задержка)

UX приоритеты (на основе исследования конкурентов):
├─ Большие высококачественные фото (минимум 800x800px)
├─ Минимум 3 клика до оформления заказа
├─ Мобильный фильтр: шторка снизу, а не боковая панель
└─ "Липкая" кнопка "В корзину" на мобилке (всегда видна)
```

### 2. 🛒 Модуль корзины и оформления заказа
**Назначение**: Управление корзиной и обработка заказов

```
Функции:
├─ 🛒 Управление корзиной
│  ├─ Добавление/удаление товаров
│  ├─ Изменение количества (+ / - кнопки)
│  ├─ Расчёт стоимости в реальном времени
│  ├─ Сохранение корзины (localStorage → БД после авторизации)
│  └─ Индикатор корзины: иконка с количеством товаров
│
├─ 📝 Форма оформления заказа (одностраничная!)
│  ├─ Шаг 1: Контактные данные
│  │  ├─ ФИО (автозаполнение для авторизованных)
│  │  ├─ Телефон (маска +7 (___) ___-__-__)
│  │  └─ Email (для чека и уведомлений)
│  │
│  ├─ Шаг 2: Доставка
│  │  ├─ Выбор города (dropdown с поиском / Dadata API)
│  │  ├─ Адрес (улица, дом, квартира)
│  │  ├─ Дата доставки (календарь, блокировка прошлых дат)
│  │  ├─ Время доставки (слоты: 9-12, 12-15, 15-18, 18-21)
│  │  └─ Комментарий (пожелания к доставке, код домофона)
│  │
│  ├─ Шаг 3: Дополнительно
│  │  ├─ Открытка (текст до 200 символов)
│  │  ├─ Упаковка (стандартная / премиум +500₽)
│  │  └─ Получатель (если не совпадает с заказчиком)
│  │
│  ├─ Шаг 4: Оплата
│  │  ├─ Онлайн (ЮKassa: карты, СБП, Apple/Google Pay)
│  │  └─ При получении (наличные/карта курьеру)
│  │
│  └─ Шаг 5: Промокод
│     ├─ Поле ввода промокода
│     ├─ Применение скидки (процент или фиксированная сумма)
│     └─ Валидация (срок действия, лимит использований)
│
├─ 💰 Расчёт стоимости
│  ├─ Стоимость товаров
│  ├─ + Доставка (бесплатно от 3000₽, иначе 300-500₽)
│  ├─ - Скидка по промокоду
│  └─ = Итого к оплате (крупный шрифт, зелёный цвет)
│
├─ ✅ Подтверждение заказа
│  ├─ Страница "Спасибо за заказ!"
│  ├─ Номер заказа (№12345)
│  ├─ SMS и Email подтверждение
│  └─ Кнопка "Отследить заказ"
│
└─ 🔐 Безопасность
   ├─ Валидация всех полей (Zod схемы)
   ├─ CSRF токены
   └─ PCI DSS для платежей (ЮKassa берёт на себя)

Технологии:
├─ React Hook Form (производительность + валидация)
├─ Zod для схем валидации
├─ ЮKassa SDK для платежей
├─ localStorage → IndexedDB для корзины (offline-ready)
└─ Optimistic UI updates (мгновенный фидбек)

Оптимизация конверсии:
├─ Прогресс-бар оформления (5 шагов → визуализация)
├─ Автосохранение данных (не теряем при обновлении страницы)
├─ Возможность редактировать корзину прямо в чекауте
└─ Таймер срочной доставки: "Закажите в течение 2 часов для доставки сегодня"
```

### 3. 📦 Модуль управления заказами (админ-панель)
**Назначение**: Отслеживание и управление заказами

```
Функции:
├─ 📋 Список заказов
│  ├─ Табличное представление
│  │  ├─ Колонки: №, Дата, Клиент, Сумма, Статус, Действия
│  │  ├─ Сортировка по любой колонке
│  │  └─ Пагинация (20-50-100 на странице)
│  │
│  ├─ Фильтры
│  │  ├─ По статусу (новый, в обработке, доставлен, отменён)
│  │  ├─ По дате (сегодня, неделя, месяц, период)
│  │  ├─ По сумме заказа (от-до)
│  │  └─ По клиенту (поиск по имени/телефону)
│  │
│  └─ Быстрые фильтры
│     ├─ "Требуют внимания" (новые + просроченные)
│     ├─ "Сегодняшние доставки"
│     └─ "Проблемные" (отмены, возвраты)
│
├─ 🔄 Управление статусами
│  ├─ Workflow: Новый → Подтверждён → Собирается → В доставке → Доставлен
│  ├─ Боковая ветка: → Отменён / Возврат
│  ├─ Автоматические уведомления при смене статуса
│  └─ История изменений (кто, когда, почему)
│
├─ 📊 Детали заказа
│  ├─ Информация о клиенте
│  │  ├─ ФИО, телефон, email
│  │  ├─ История заказов (повторный клиент?)
│  │  └─ Кнопка "Позвонить" / "Написать"
│  │
│  ├─ Состав заказа
│  │  ├─ Список товаров с фото
│  │  ├─ Количество, цена за штуку
│  │  └─ Итоговая сумма
│  │
│  ├─ Доставка
│  │  ├─ Адрес (с кнопкой "Открыть на карте")
│  │  ├─ Дата и время
│  │  ├─ Комментарии клиента
│  │  └─ Статус доставки
│  │
│  └─ Платёж
│     ├─ Способ оплаты
│     ├─ Статус (оплачено / не оплачено)
│     └─ Транзакция (ID платежа в ЮKassa)
│
├─ 📤 Экспорт данных
│  ├─ Excel выгрузка (выбранные или все заказы)
│  ├─ Настройка колонок для экспорта
│  └─ Экспорт в 1С (если интеграция подключена)
│
└─ 📜 История изменений
   ├─ Лог всех действий с заказом
   ├─ Комментарии менеджеров
   └─ Системные события (оплата, SMS, email)

Технологии:
├─ React Admin компоненты (shadcn/ui Table)
├─ TanStack Table (виртуализация для больших списков)
├─ ExcelJS для экспорта в .xlsx
├─ WebSocket / Server-Sent Events для real-time обновлений
└─ Оптимистичные обновления для быстрого UX

Бизнес-фичи:
├─ Быстрые действия: "Позвонить клиенту" (интеграция с телефонией)
├─ Шаблоны SMS: "Ваш заказ в пути", "Доставлен"
├─ Напоминания: "Заказ без подтверждения 30 минут"
└─ Аналитика по менеджерам: кто обрабатывает больше заказов
```

### 4. 🎨 Система управления контентом (CMS)
**Назначение**: Управление контентом сайта без программистов

```
Функции:
├─ 📄 Редактор страниц
│  ├─ WYSIWYG редактор (TipTap / Lexical)
│  │  ├─ Форматирование: жирный, курсив, заголовки
│  │  ├─ Списки: маркированные, нумерованные
│  │  ├─ Изображения: загрузка, выравнивание
│  │  ├─ Видео: вставка YouTube/Vimeo
│  │  └─ Таблицы, цитаты, разделители
│  │
│  ├─ SEO настройки
│  │  ├─ Мета-заголовок (Title, до 60 символов)
│  │  ├─ Мета-описание (Description, до 160 символов)
│  │  ├─ ЧПУ (Slug): /about-us, /delivery-info
│  │  └─ Open Graph теги (для соцсетей)
│  │
│  └─ Управляемые страницы
│     ├─ О компании
│     ├─ Доставка и оплата
│     ├─ Советы по уходу за цветами
│     └─ Контакты
│
├─ 📰 Блог / Новости
│  ├─ Список статей с фильтрацией
│  ├─ Создание новой статьи
│  │  ├─ Заголовок, обложка, содержание
│  │  ├─ Категории (советы, новости, акции)
│  │  ├─ Теги для поиска
│  │  └─ Дата публикации (отложенная публикация)
│  │
│  └─ Комментарии (опционально)
│     ├─ Модерация (одобрить/отклонить)
│     └─ Уведомления о новых комментариях
│
├─ 🎉 Акции и промокоды
│  ├─ Создание акции
│  │  ├─ Название, описание, изображение
│  │  ├─ Период действия (от-до)
│  │  ├─ Скидка (%, ₽) или подарок
│  │  └─ Условия (минимальная сумма заказа)
│  │
│  ├─ Промокоды
│  │  ├─ Генерация кодов (SALE2026, BIRTHDAY)
│  │  ├─ Лимит использований (100 раз / 1 на клиента)
│  │  └─ Применимость (все товары / категория)
│  │
│  └─ Баннеры на главной
│     ├─ Слайдер (3-5 слайдов)
│     ├─ Загрузка изображений (рекомендация: 1920x600px)
│     └─ Ссылка на акцию / категорию
│
├─ ⭐ Управление отзывами
│  ├─ Список отзывов (ожидающие / опубликованные)
│  ├─ Модерация
│  │  ├─ Одобрить → показывается на сайте
│  │  ├─ Отклонить → скрывается
│  │  └─ Ответить → ответ администрации
│  │
│  └─ Фильтр по товарам / общим отзывам о салоне
│
└─ 📸 Медиа-библиотека
   ├─ Загрузка изображений (drag-and-drop)
   ├─ Автоматическая оптимизация
   │  ├─ Конвертация в WebP (с fallback JPEG)
   │  ├─ Сжатие до 200 КБ
   │  └─ Создание превью (thumbnails)
   │
   ├─ Организация
   │  ├─ Папки: товары, акции, блог, страницы
   │  ├─ Поиск по имени файла
   │  └─ Массовое удаление
   │
   └─ Интеграция с CDN (Cloudflare R2 / Vercel Blob)

Технологии:
├─ TipTap или Lexical (современные WYSIWYG)
├─ React Dropzone для загрузки файлов
├─ Sharp для оптимизации изображений (серверная часть)
├─ Cloudflare R2 / Vercel Blob для хранения
└─ React Query для кэширования данных

Удобство для бизнеса:
├─ Шаблоны для типовых страниц (1 клик → готовая страница)
├─ Предпросмотр перед публикацией (как увидит клиент)
├─ Версионность: откат к предыдущей версии страницы
└─ Мобильный предпросмотр (как выглядит на телефоне)
```

### 5. 🔐 Модуль аутентификации и авторизации
**Назначение**: Безопасный доступ пользователей и ролей

```
Функции:
├─ 👤 Регистрация и вход
│  ├─ Email + пароль (минимум 8 символов)
│  ├─ Социальные сети (Google, Яндекс, VK)
│  ├─ Подтверждение email (письмо с ссылкой)
│  └─ Восстановление пароля (ссылка на email)
│
├─ 🎭 Ролевая модель
│  ├─ Администратор (полный доступ)
│  │  ├─ Управление товарами, заказами, контентом
│  │  ├─ Управление пользователями и ролями
│  │  └─ Доступ к аналитике и отчётам
│  │
│  ├─ Менеджер (управление заказами и товарами)
│  │  ├─ Просмотр и обработка заказов
│  │  ├─ Редактирование товаров (цены, наличие)
│  │  └─ НЕТ доступа к настройкам и аналитике
│  │
│  └─ Клиент (личный кабинет)
│     ├─ Просмотр истории заказов
│     ├─ Отслеживание текущих заказов
│     ├─ Управление адресами доставки
│     └─ Избранные товары
│
├─ 🔒 Меры безопасности
│  ├─ Хеширование паролей (bcrypt, 12 rounds)
│  ├─ JWT токены (access + refresh)
│  │  ├─ Access token: 15 минут
│  │  └─ Refresh token: 7 дней
│  │
│  ├─ CSRF защита (токены в формах)
│  ├─ Rate limiting (макс. 5 попыток входа за 15 минут)
│  ├─ XSS защита (sanitize всех input)
│  └─ SQL injection защита (Prisma ORM)
│
├─ 📝 Личный кабинет клиента
│  ├─ Профиль
│  │  ├─ ФИО, email, телефон
│  │  ├─ Дата рождения (для персональных скидок)
│  │  └─ Смена пароля
│  │
│  ├─ История заказов
│  │  ├─ Список всех заказов
│  │  ├─ Статус каждого заказа
│  │  └─ Повторный заказ (1 клик)
│  │
│  ├─ Адреса доставки
│  │  ├─ Сохранённые адреса (дом, работа, родители)
│  │  ├─ Выбор адреса по умолчанию
│  │  └─ Быстрое оформление на знакомый адрес
│  │
│  └─ Избранное
│     ├─ Сохранённые товары
│     └─ Быстрое добавление в корзину
│
└─ 🔑 Middleware для защиты роутов
   ├─ Публичные: главная, каталог, товар
   ├─ Требуют авторизации: личный кабинет, оформление заказа
   └─ Только админы: /admin/*

Технологии:
├─ NextAuth.js (современная auth для Next.js)
├─ bcrypt для хеширования паролей
├─ JWT (jsonwebtoken) для токенов
├─ Middleware Next.js для защиты роутов
└─ OAuth провайдеры (Google, Яндекс, VK)

Удобство для клиентов:
├─ Быстрый вход через соцсети (1 клик, без регистрации)
├─ "Запомнить меня" (refresh token на 30 дней)
├─ Гостевой заказ (без регистрации, потом можно создать аккаунт)
└─ Автозаполнение данных в чекауте (если авторизован)
```

### 6. 📊 Модуль аналитики и отчётности
**Назначение**: Отслеживание бизнес-метрик и производительности

```
Функции:
├─ 📈 Дашборд (главный экран админки)
│  ├─ Ключевые метрики (за сегодня / неделю / месяц)
│  │  ├─ Выручка (₽)
│  │  ├─ Количество заказов
│  │  ├─ Средний чек (₽)
│  │  ├─ Конверсия (% визитов → заказы)
│  │  └─ Новые клиенты
│  │
│  ├─ График продаж
│  │  ├─ Выручка по дням (линейный график)
│  │  ├─ Сравнение с прошлым периодом
│  │  └─ Выбор периода (день, неделя, месяц, год)
│  │
│  └─ Быстрые ссылки
│     ├─ "Новые заказы" (красный бейдж если есть)
│     ├─ "Товары на исходе" (низкий остаток)
│     └─ "Ожидают модерации" (отзывы, возвраты)
│
├─ 🏆 Аналитика товаров
│  ├─ Топ продаж (топ-10 товаров по выручке)
│  ├─ Товары с низким спросом (не покупали месяц)
│  ├─ Средний рейтинг товара (звёзды)
│  ├─ Низкий остаток (< 5 штук)
│  └─ Просмотры товаров (популярные, но не покупают)
│
├─ 👥 Аналитика клиентов
│  ├─ Новые vs повторные клиенты
│  ├─ Lifetime Value (LTV) клиента
│  ├─ Частота покупок (сколько раз в год)
│  ├─ Сегментация
│  │  ├─ VIP клиенты (> 50 000₽ за год)
│  │  ├─ Активные (2+ заказа в квартал)
│  │  └─ Спящие (не покупали 6+ месяцев)
│  │
│  └─ География клиентов (топ-10 городов)
│
├─ 🛒 Воронка продаж
│  ├─ Визиты на сайт
│  ├─ → Просмотр товаров
│  ├─ → Добавление в корзину
│  ├─ → Начало оформления
│  ├─ → Завершение заказа
│  └─ Процент на каждом этапе (где теряем клиентов?)
│
├─ 💰 Финансовые отчёты
│  ├─ Выручка за период (с группировкой по дням/неделям/месяцам)
│  ├─ Средний чек
│  ├─ Структура платежей (онлайн / при получении)
│  ├─ Промокоды: сколько использовано, на какую сумму
│  └─ Возвраты и отмены (сумма потерь)
│
└─ 📊 Кастомные отчёты
   ├─ Конструктор отчётов
   │  ├─ Выбор метрик (выручка, заказы, клиенты)
   │  ├─ Группировка (день, неделя, месяц, категория)
   │  └─ Фильтры (период, категория, менеджер)
   │
   └─ Экспорт (Excel, PDF, CSV)

Технологии:
├─ Chart.js или Recharts для визуализаций
├─ Серверная агрегация SQL запросов
├─ Redis для кэширования метрик (обновление раз в 5 минут)
└─ ExcelJS / PDFKit для экспорта отчётов

Интеграции:
├─ Яндекс.Метрика (веб-аналитика)
├─ Google Analytics 4 (альтернатива)
└─ Webhook в Telegram (уведомления о важных событиях)

Для бизнеса:
├─ Цели: отслеживание целей (покупка, регистрация, подписка)
├─ A/B тесты: тестирование разных вариантов страниц
├─ Когортный анализ: поведение групп клиентов по месяцам
└─ RFM анализ: Recency, Frequency, Monetary (сегментация клиентов)
```

### 7. 🔗 Модуль интеграций
**Назначение**: Подключение внешних сервисов

```
Функции:
├─ 💳 Платёжный шлюз
│  ├─ ЮKassa (primary для РФ)
│  │  ├─ Банковские карты (Visa, MasterCard, Мир)
│  │  ├─ СБП (Система быстрых платежей)
│  │  ├─ Apple Pay / Google Pay
│  │  ├─ ЮMoney (электронный кошелёк)
│  │  └─ Рассрочка (Tinkoff, Альфа-Банк)
│  │
│  ├─ Stripe (fallback, для международных платежей)
│  │  ├─ Карты международные
│  │  └─ 3D Secure
│  │
│  └─ Вебхуки для подтверждения оплаты
│     ├─ payment.succeeded → активация заказа
│     ├─ payment.canceled → отмена заказа
│     └─ refund.succeeded → возврат средств
│
├─ 📧 Email-сервис
│  ├─ Resend (primary) или SendGrid
│  │  ├─ Транзакционные письма
│  │  │  ├─ Подтверждение регистрации
│  │  │  ├─ Восстановление пароля
│  │  │  ├─ Подтверждение заказа
│  │  │  └─ Чек об оплате
│  │  │
│  │  ├─ Маркетинговые рассылки
│  │  │  ├─ Акции и скидки
│  │  │  ├─ Новые товары
│  │  │  └─ Брошенные корзины (напоминание)
│  │  │
│  │  └─ Шаблоны (React Email)
│  │     ├─ Адаптивная вёрстка
│  │     ├─ Фирменный стиль салона
│  │     └─ Предпросмотр в коде
│  │
│  └─ Unsubscribe (отписка от рассылки)
│
├─ 📱 SMS-уведомления
│  ├─ SMS.ru (primary для РФ) или Twilio
│  ├─ Сценарии отправки
│  │  ├─ Подтверждение заказа (№заказа, сумма)
│  │  ├─ Статус заказа ("Заказ собран", "Курьер в пути")
│  │  ├─ Доставлен ("Заказ доставлен, приятного дня!")
│  │  └─ Промокоды ("Ваш промокод BIRTHDAY на -20%")
│  │
│  └─ Шаблоны SMS (до 70 символов кириллицы)
│
├─ 🏢 Интеграция с 1С (опционально)
│  ├─ Синхронизация товаров
│  │  ├─ 1С → Сайт: обновление цен и остатков
│  │  ├─ Частота: каждые 15 минут
│  │  └─ API: REST или XML (Комтет Standart OData)
│  │
│  ├─ Экспорт заказов
│  │  ├─ Сайт → 1С: новые заказы
│  │  └─ Формат: JSON или XML
│  │
│  └─ Управление
│     ├─ Логи синхронизации (ошибки, предупреждения)
│     └─ Ручная синхронизация (кнопка в админке)
│
├─ 🗺️ Сервисы карт и адресов
│  ├─ Dadata API
│  │  ├─ Автодополнение адресов
│  │  ├─ Валидация адреса (существует ли?)
│  │  └─ Получение координат
│  │
│  └─ Google Maps / Яндекс.Карты
│     ├─ Карта на странице контактов (офис салона)
│     ├─ Зоны доставки (полигоны)
│     └─ Расчёт стоимости доставки по расстоянию
│
├─ 📲 API для мобильного приложения (будущее)
│  ├─ REST API или tRPC
│  ├─ Эндпоинты
│  │  ├─ /api/products → список товаров
│  │  ├─ /api/orders → создание заказа
│  │  ├─ /api/user → профиль пользователя
│  │  └─ /api/auth → аутентификация
│  │
│  └─ Документация (Swagger / OpenAPI)
│
└─ 🤖 Чат-боты (опционально)
   ├─ Telegram Bot
   │  ├─ Уведомления о новых заказах в админ-чат
   │  ├─ Быстрые команды (/orders_today, /sales_month)
   │  └─ Клиентский бот: заказ через Telegram
   │
   └─ VK / WhatsApp Бизнес
      └─ Консультации и приём заказов

Технологии:
├─ ЮKassa SDK (официальная библиотека)
├─ Resend API (простая интеграция)
├─ SMS.ru API или Twilio SDK
├─ tRPC для type-safe API
└─ Webhooks с верификацией подписи (security)

Для бизнеса:
├─ Мониторинг интеграций (uptime, ошибки)
├─ Fallback планы (если ЮKassa недоступна → Stripe)
├─ Логирование всех внешних запросов (audit trail)
└─ Тестовый режим для всех интеграций (sandbox)
```

---

## 📁 Структура проекта

```
flower-shop/
├─ 📁 src/
│  ├─ 📁 app/                         # Next.js App Router
│  │  ├─ 📁 (public)/                # Публичные маршруты
│  │  │  ├─ page.tsx                 # Главная страница
│  │  │  │  └─ Hero слайдер, категории, хиты, отзывы
│  │  │  │
│  │  │  ├─ 📁 catalog/              # Каталог товаров
│  │  │  │  ├─ page.tsx              # Список товаров
│  │  │  │  └─ [category]/          # Категория
│  │  │  │     └─ page.tsx
│  │  │  │
│  │  │  ├─ 📁 product/[id]/         # Карточка товара
│  │  │  │  └─ page.tsx
│  │  │  │
│  │  │  ├─ 📁 cart/                 # Корзина
│  │  │  │  └─ page.tsx
│  │  │  │
│  │  │  ├─ 📁 checkout/             # Оформление заказа
│  │  │  │  ├─ page.tsx              # Форма заказа
│  │  │  │  └─ success/              # Спасибо за заказ
│  │  │  │     └─ page.tsx
│  │  │  │
│  │  │  ├─ 📁 about/                # О компании
│  │  │  ├─ 📁 delivery/             # Доставка и оплата
│  │  │  ├─ 📁 care-tips/            # Советы по уходу
│  │  │  ├─ 📁 blog/                 # Блог
│  │  │  │  ├─ page.tsx              # Список статей
│  │  │  │  └─ [slug]/              # Статья
│  │  │  │
│  │  │  └─ 📁 contacts/             # Контакты
│  │  │
│  │  ├─ 📁 (auth)/                  # Аутентификация
│  │  │  ├─ login/                   # Вход
│  │  │  ├─ register/                # Регистрация
│  │  │  └─ reset-password/          # Восстановление пароля
│  │  │
│  │  ├─ 📁 (account)/               # Личный кабинет клиента
│  │  │  ├─ dashboard/               # Обзор
│  │  │  ├─ orders/                  # История заказов
│  │  │  ├─ profile/                 # Профиль
│  │  │  ├─ addresses/               # Адреса доставки
│  │  │  └─ favorites/               # Избранное
│  │  │
│  │  ├─ 📁 (admin)/                 # Админ-панель
│  │  │  ├─ dashboard/               # Обзор метрик
│  │  │  ├─ products/                # Управление товарами
│  │  │  │  ├─ page.tsx              # Список товаров
│  │  │  │  ├─ new/                  # Создание товара
│  │  │  │  └─ [id]/edit/           # Редактирование
│  │  │  │
│  │  │  ├─ orders/                  # Управление заказами
│  │  │  │  ├─ page.tsx              # Список заказов
│  │  │  │  └─ [id]/                # Детали заказа
│  │  │  │
│  │  │  ├─ customers/               # Управление клиентами
│  │  │  ├─ content/                 # CMS
│  │  │  │  ├─ pages/               # Страницы
│  │  │  │  ├─ blog/                # Блог
│  │  │  │  ├─ promotions/          # Акции
│  │  │  │  ├─ reviews/             # Отзывы
│  │  │  │  └─ media/               # Медиа-библиотека
│  │  │  │
│  │  │  ├─ analytics/               # Аналитика
│  │  │  └─ settings/                # Настройки
│  │  │
│  │  └─ 📁 api/                     # API маршруты
│  │     ├─ trpc/[trpc]/            # tRPC endpoints
│  │     ├─ webhooks/                # Вебхуки (ЮKassa, и др.)
│  │     │  ├─ yukassa/
│  │     │  └─ stripe/
│  │     │
│  │     └─ auth/[...nextauth]/     # NextAuth.js
│  │
│  ├─ 📁 components/                 # React компоненты
│  │  ├─ 📁 ui/                      # shadcn/ui компоненты
│  │  │  ├─ button.tsx
│  │  │  ├─ card.tsx
│  │  │  ├─ dialog.tsx
│  │  │  ├─ form.tsx
│  │  │  └─ ... (30+ компонентов)
│  │  │
│  │  ├─ 📁 catalog/                 # Компоненты каталога
│  │  │  ├─ product-card.tsx        # Карточка товара
│  │  │  ├─ product-filters.tsx     # Фильтры
│  │  │  ├─ product-grid.tsx        # Сетка товаров
│  │  │  └─ quick-view-modal.tsx    # Быстрый просмотр
│  │  │
│  │  ├─ 📁 cart/                    # Компоненты корзины
│  │  │  ├─ cart-item.tsx           # Товар в корзине
│  │  │  ├─ cart-summary.tsx        # Итоги корзины
│  │  │  └─ cart-drawer.tsx         # Выдвижная корзина
│  │  │
│  │  ├─ 📁 checkout/                # Компоненты оформления
│  │  │  ├─ checkout-form.tsx       # Форма заказа
│  │  │  ├─ delivery-options.tsx    # Выбор доставки
│  │  │  └─ payment-method.tsx      # Способ оплаты
│  │  │
│  │  ├─ 📁 admin/                   # Админ компоненты
│  │  │  ├─ orders-table.tsx        # Таблица заказов
│  │  │  ├─ product-form.tsx        # Форма товара
│  │  │  ├─ analytics-chart.tsx     # Графики аналитики
│  │  │  └─ rich-text-editor.tsx    # WYSIWYG редактор
│  │  │
│  │  └─ 📁 shared/                  # Общие компоненты
│  │     ├─ header.tsx               # Шапка сайта
│  │     ├─ footer.tsx               # Подвал
│  │     ├─ navigation.tsx           # Навигация
│  │     ├─ search-bar.tsx           # Поиск
│  │     └─ breadcrumbs.tsx          # Хлебные крошки
│  │
│  ├─ 📁 lib/                        # Библиотеки и утилиты
│  │  ├─ 📁 db/                      # База данных
│  │  │  ├─ client.ts                # Prisma клиент
│  │  │  └─ schema/                  # Zod схемы для валидации
│  │  │
│  │  ├─ 📁 auth/                    # Аутентификация
│  │  │  ├─ config.ts                # NextAuth конфиг
│  │  │  ├─ providers.ts             # OAuth провайдеры
│  │  │  └─ middleware.ts            # Защита роутов
│  │  │
│  │  ├─ 📁 payments/                # Платежи
│  │  │  ├─ yukassa.ts               # ЮKassa интеграция
│  │  │  ├─ stripe.ts                # Stripe интеграция
│  │  │  └─ webhooks.ts              # Обработка вебхуков
│  │  │
│  │  ├─ 📁 email/                   # Email
│  │  │  ├─ client.ts                # Resend клиент
│  │  │  ├─ templates/               # React Email шаблоны
│  │  │  │  ├─ order-confirmation.tsx
│  │  │  │  ├─ password-reset.tsx
│  │  │  │  └─ promotional.tsx
│  │  │  └─ send.ts                  # Отправка писем
│  │  │
│  │  ├─ 📁 sms/                     # SMS
│  │  │  ├─ client.ts                # SMS.ru / Twilio клиент
│  │  │  └─ templates.ts             # Шаблоны SMS
│  │  │
│  │  ├─ 📁 storage/                 # Файловое хранилище
│  │  │  ├─ upload.ts                # Загрузка файлов
│  │  │  ├─ optimize.ts              # Оптимизация изображений
│  │  │  └─ cdn.ts                   # CDN интеграция
│  │  │
│  │  └─ 📁 utils/                   # Утилиты
│  │     ├─ cn.ts                    # classNames helper
│  │     ├─ format.ts                # Форматирование (дата, цена)
│  │     └─ validation.ts            # Zod схемы
│  │
│  ├─ 📁 hooks/                      # Custom React hooks
│  │  ├─ use-cart.ts                 # Управление корзиной
│  │  ├─ use-products.ts             # Загрузка товаров
│  │  ├─ use-orders.ts               # Управление заказами
│  │  └─ use-debounce.ts             # Debounce hook
│  │
│  ├─ 📁 server/                     # Серверная логика
│  │  ├─ 📁 routers/                 # tRPC роутеры
│  │  │  ├─ products.ts              # Товары
│  │  │  ├─ orders.ts                # Заказы
│  │  │  ├─ auth.ts                  # Аутентификация
│  │  │  └─ analytics.ts             # Аналитика
│  │  │
│  │  ├─ 📁 services/                # Бизнес-логика
│  │  │  ├─ cart-service.ts          # Логика корзины
│  │  │  ├─ order-service.ts         # Логика заказов
│  │  │  ├─ payment-service.ts       # Логика платежей
│  │  │  └─ analytics-service.ts     # Логика аналитики
│  │  │
│  │  └─ context.ts                  # tRPC context
│  │
│  ├─ 📁 styles/                     # Стили
│  │  ├─ globals.css                 # Глобальные стили
│  │  └─ themes/                     # Темы (светлая/тёмная)
│  │
│  └─ 📁 types/                      # TypeScript типы
│     ├─ product.ts                  # Типы товаров
│     ├─ order.ts                    # Типы заказов
│     ├─ user.ts                     # Типы пользователей
│     └─ api.ts                      # API типы
│
├─ 📁 prisma/                        # Prisma ORM
│  ├─ schema.prisma                  # Схема БД
│  ├─ migrations/                    # Миграции
│  └─ seed.ts                        # Наполнение тестовыми данными
│
├─ 📁 public/                        # Статические файлы
│  ├─ images/                        # Изображения
│  │  ├─ logo.svg                    # Логотип
│  │  ├─ hero/                       # Баннеры главной
│  │  └─ placeholders/               # Заглушки
│  │
│  ├─ fonts/                         # Шрифты (если custom)
│  └─ favicon.ico                    # Иконка сайта
│
├─ 📁 docs/                          # Документация
│  ├─ api/                           # API документация
│  ├─ setup/                         # Инструкции по установке
│  └─ deployment/                    # Деплой на Vercel
│
├─ 📁 tests/                         # Тесты
│  ├─ unit/                          # Unit тесты
│  │  └─ services/                   # Тесты сервисов
│  │
│  ├─ integration/                   # Интеграционные тесты
│  │  └─ api/                        # Тесты API
│  │
│  └─ e2e/                           # End-to-end тесты
│     └─ checkout.spec.ts            # Тест покупки
│
├─ 📁 .github/                       # GitHub Actions
│  └─ workflows/
│     ├─ ci.yml                      # CI пайплайн
│     └─ deploy.yml                  # Деплой на Vercel
│
├─ 📄 package.json                   # Зависимости
├─ 📄 tsconfig.json                  # TypeScript конфиг
├─ 📄 tailwind.config.ts             # Tailwind конфиг
├─ 📄 next.config.js                 # Next.js конфиг
├─ 📄 .env.example                   # Пример env переменных
├─ 📄 .eslintrc.json                 # ESLint правила
├─ 📄 .prettierrc                    # Prettier конфиг
└─ 📄 README.md                      # Документация проекта
```

**Ключевые файлы конфигурации:**

### `package.json` (основные зависимости)
```json
{
  "dependencies": {
    "next": "^15.0.0",
    "react": "^19.0.0",
    "typescript": "^5.7.0",
    "@prisma/client": "^6.0.0",
    "@trpc/server": "^11.0.0",
    "next-auth": "^5.0.0",
    "zod": "^3.24.0",
    "tailwindcss": "^4.0.0",
    "@radix-ui/react-*": "^1.0.0",
    "framer-motion": "^12.0.0"
  }
}
```

### `prisma/schema.prisma` (пример схемы БД)
```prisma
model Product {
  id          String   @id @default(cuid())
  name        String
  slug        String   @unique
  description String?
  price       Decimal
  images      String[]
  categoryId  String
  category    Category @relation(fields: [categoryId], references: [id])
  stock       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Order {
  id            String      @id @default(cuid())
  orderNumber   String      @unique
  userId        String?
  user          User?       @relation(fields: [userId], references: [id])
  items         OrderItem[]
  totalAmount   Decimal
  status        OrderStatus @default(NEW)
  paymentStatus PaymentStatus @default(PENDING)
  deliveryDate  DateTime
  address       Json
  createdAt     DateTime    @default(now())
}

enum OrderStatus {
  NEW
  CONFIRMED
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
}
```

---

## 🎨 Дизайн-тренды 2026 для цветочного салона

> На основе исследования лучших мировых практик в luxury florist e-commerce

### 1. 🌟 Максимализм и роскошь
**Отход от минимализма → смелое выражение бренда**

```
Применение:
├─ Роскошные текстуры: шёлк, мрамор, золотые акценты
├─ Типографика: Art Deco шрифты для заголовков
├─ Кнопки: "sleek" дизайн с hover эффектами (scale, glow)
└─ Цветовая палитра премиум-класса
   ├─ Основа: нежные пастельные тона (розовый, лавандовый, мятный)
   ├─ Акценты: золото (#D4AF37), изумруд (#50C878)
   └─ Тёмный режим: глубокий фиолетовый + золото

Примеры из исследования:
├─ Plantsome (Нидерланды): next-level дизайн, conversion psychology
└─ Tonics Blooms: успокаивающая палитра, элегантная навигация
```

### 2. 🖼️ Full-Screen Immersive Hero
**Полноэкранные героические секции с видео**

```
Главная страница:
├─ Видео-фон (цветущие букеты, флористы за работой)
├─ Автовоспроизведение без звука (loop)
├─ Overlay с CTA: "Создайте свой идеальный букет"
└─ Parallax эффект при прокрутке

Почему это работает:
├─ Видео превосходит статичные изображения (engagement +80%)
├─ Luxury бренды (Tesla, BMW) используют этот подход
└─ Storytelling > статичный UI
```

### 3. 🤖 AI-персонализация
**Интерфейс адаптируется под каждого клиента**

```
Функции:
├─ Рекомендации товаров на основе истории просмотров
├─ Персональные акции (день рождения → скидка 15%)
├─ Умный поиск: "розовый букет до 3000₽ для мамы"
└─ Эмоциональные триггеры: "Вы смотрели этот букет 3 раза — специально для вас -10%"

Технологии:
├─ TensorFlow.js (client-side ML)
├─ Collaborative filtering (рекомендации)
└─ A/B тесты для оптимизации
```

### 4. ✨ Микроинтеракции
**Тонкие анимации для оживления UI**

```
Примеры:
├─ Добавление в корзину: товар "летит" в иконку корзины
├─ Hover на карточке: плавное увеличение (scale 1.05)
├─ Лайк товара: сердечко с bounce анимацией
├─ Заполнение формы: поле мигает зелёным при успешной валидации
└─ Загрузка: skeleton screens вместо спиннеров

Библиотеки:
├─ Framer Motion (React анимации)
├─ React Spring (физика анимаций)
└─ GSAP (сложные scroll-анимации)
```

### 5. 🍱 Bento Grid Layouts
**Модульная сетка как японский бенто-бокс**

```
Применение:
├─ Главная страница: разные размеры блоков
│  ├─ Большой блок: акция недели
│  ├─ 2 средних: "Букеты" и "Комнатные растения"
│  └─ 4 маленьких: быстрые категории
│
└─ Адаптивность: сетка перестраивается на мобилке

Преимущества:
├─ Визуальная иерархия (важное — крупнее)
├─ Динамический ритм страницы
└─ Высокая плотность информации без перегруза
```

### 6. 🪟 Glassmorphism
**Полупрозрачные "стеклянные" элементы**

```css
/* Пример кода */
.glass-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

Применение:
├─ Модальные окна (быстрый просмотр товара)
├─ Навигационная панель (прозрачная шапка)
├─ Карточки товаров (overlay при hover)
└─ Мобильное меню (выдвижная панель)

Тренд: Apple 2025 редизайн — glassmorphism в центре визуальной системы
```

### 7. 🌱 Sustainable дизайн
**Энергоэффективный и "чистый" интерфейс**

```
Принципы:
├─ Меньше анимаций (только смысловые)
├─ Лёгкие файлы: WebP вместо JPEG, сжатие до 200 КБ
├─ Быстрая загрузка: < 2 сек (экономия энергии устройства)
└─ Тёмный режим по умолчанию (экономия батареи OLED)

Почему важно для цветочного салона:
├─ Экологичность → часть бренда (живые цветы = природа)
└─ Забота о планете → лояльность клиентов
```

### 8. 📝 Bold Typography + Visual Integration
**Текст как часть визуальной композиции**

```
Подход:
├─ Крупные заголовки (72-120px на десктопе)
├─ Overlap: текст накладывается на изображения
├─ Анимированная типографика: текст "появляется" при скролле
└─ Переменные шрифты (Variable Fonts) для плавных переходов

Пример для главной:
├─ Заголовок: "Свежие цветы каждый день" (120px, полупрозрачный)
├─ Фон: видео с букетами
└─ Эффект: текст масштабируется при скролле
```

### 9. 📱 Mobile-First (70% заказов!)
**Критически важно для флористики**

```
Статистика:
├─ 70% заказов цветов — с мобильных устройств
├─ Особенно: last-minute подарки (по дороге на праздник)
└─ Если мобильная версия "тормозит" → потеря 80% трафика

Приоритеты мобильного UX:
├─ Thumb-friendly: кнопки в зоне большого пальца
├─ Липкая кнопка "В корзину" (всегда видна)
├─ Фильтры: шторка снизу (bottom sheet), не боковая панель
├─ Оплата: Apple Pay / Google Pay в 1 клик
└─ Галерея товара: swipe влево-вправо (как Instagram)

Производительность:
├─ Lazy loading изображений (загрузка при скролле)
├─ Skeleton screens (показываем структуру до загрузки)
└─ Offline-ready: PWA для просмотра каталога без интернета
```

### 10. 🎯 Конверсия и психология
**Дизайн-паттерны для увеличения продаж**

```
1. Дефицит (Scarcity):
   ├─ "Осталось 3 букета" (красный текст)
   ├─ Таймер: "Закажите в течение 2 часов для доставки сегодня"
   └─ "12 человек сейчас смотрят этот товар"

2. Социальное доказательство (Social Proof):
   ├─ Отзывы с фото клиентов (UGC)
   ├─ "Купили 127 раз на этой неделе"
   └─ Рейтинг 4.8/5 (1 234 отзыва)

3. Якорение цены (Price Anchoring):
   ├─ Зачёркнутая старая цена: ~~5000₽~~ → 3990₽
   ├─ "Вы экономите 1010₽"
   └─ Сравнение: "Букет Премиум vs Стандарт" (подталкиваем к Premium)

4. Упрощение выбора (Choice Architecture):
   ├─ Максимум 3 варианта упаковки (не 10)
   ├─ Рекомендуемый вариант: бейдж "Популярный выбор"
   └─ Фильтры по поводу: "Свадьба" → сразу подходящие букеты

5. Минимум кликов (Friction Reduction):
   ├─ Гостевой заказ (без регистрации)
   ├─ Автозаполнение адреса (Dadata)
   ├─ Сохранённые способы оплаты
   └─ "Быстрый заказ" в 1 клик (для авторизованных)

6. Exit-intent popup:
   ├─ Триггер: пользователь двигает мышь к закрытию вкладки
   ├─ Оффер: "Подождите! Скидка 10% на первый заказ"
   └─ Форма: email → промокод
```

### 🎨 Цветовая палитра (на основе исследования)

```
Primary (Основной):
├─ #FFC0CB (Розовый нежный) — романтика, нежность
└─ Использование: кнопки CTA, акценты, ховер состояния

Secondary (Второстепенный):
├─ #50C878 (Изумрудно-зелёный) — свежесть, природа
└─ Использование: успешные действия, бейджи "В наличии"

Accent (Акцент):
├─ #D4AF37 (Золото) — премиум, роскошь
└─ Использование: иконки премиум товаров, VIP клиенты

Neutrals (Нейтральные):
├─ #FFFFFF (Белый) — чистота, пространство
├─ #F5F5F5 (Светло-серый) — фоны секций
├─ #333333 (Тёмно-серый) — основной текст
└─ #CCCCCC (Серый) — второстепенный текст

Dark Mode (Тёмный режим):
├─ #1A1A1A (Почти чёрный) — основной фон
├─ #2D2D2D (Тёмно-серый) — карточки
├─ #E8D5E0 (Светло-розовый) — текст
└─ #D4AF37 (Золото) — акценты (остаются)

Эмоциональные цвета (по категориям):
├─ Романтические букеты → розовый + красный (#FF1493)
├─ Свадебные → белый + золото
├─ Праздничные → яркие цвета (микс)
└─ Соболезнования → белый + фиолетовый (#9370DB)
```

---

## 🗓 Дорожная карта разработки

### Фаза 1: Фундамент (Недели 1-2)
```
✅ Настройка и конфигурация
├─ Инициализация проекта (Next.js + TypeScript)
├─ Дизайн схемы БД (Prisma schema)
├─ Настройка Tailwind + shadcn/ui
├─ Настройка NextAuth.js (аутентификация)
└─ Базовые UI компоненты (Button, Card, Input, etc.)

🎯 Результаты:
├─ Готовая среда разработки
├─ БД подключена и работает
├─ Логин/регистрация функционируют
└─ Дизайн-система готова к использованию

🔧 Команды для старта:
$ npx create-next-app@latest flower-shop --typescript
$ npm install prisma @prisma/client
$ npx prisma init
$ npx shadcn-ui@latest init
```

### Фаза 2: Основные фичи (Недели 3-5)
```
✅ Каталог товаров
├─ Управление категориями (админка)
├─ CRUD операции для товаров
├─ Фильтрация и сортировка (клиентская часть)
├─ Загрузка изображений (оптимизация)
└─ Карточка товара с галереей

✅ Корзина и оформление заказа
├─ Добавление в корзину (с локальным хранением)
├─ Форма заказа (React Hook Form + Zod)
├─ Интеграция ЮKassa (платежи)
└─ Подтверждение заказа (email + SMS)

🎯 Результаты:
├─ Функциональный каталог с фильтрами
├─ Рабочий процесс оформления заказа
└─ Интеграция платежей (тестовый режим)

📊 Метрики успеха:
├─ Скорость загрузки каталога < 2 сек
├─ Оформление заказа за 3-5 кликов
└─ 0 ошибок при добавлении в корзину
```

### Фаза 3: Админ-панель (Недели 6-7)
```
✅ Управление заказами
├─ Список заказов с фильтрацией
├─ Обновление статусов заказов
├─ Экспорт в Excel
└─ История изменений заказа

✅ CMS (Управление контентом)
├─ Редактор страниц (WYSIWYG)
├─ Система публикации блога
├─ Управление акциями и промокодами
└─ Модерация отзывов

🎯 Результаты:
├─ Полноценная админ-панель
├─ CMS для управления контентом без программистов
└─ Система отчётности и аналитики

👥 Обучение персонала:
├─ Видео-инструкции по работе с админкой
├─ Документация с скриншотами
└─ Тестовый доступ для менеджеров
```

### Фаза 4: Полировка и тестирование (Неделя 8)
```
✅ Обеспечение качества
├─ Unit тесты (Jest) для сервисов
├─ E2E тесты (Playwright) для критичных путей
│  ├─ Тест: добавление в корзину → оформление → оплата
│  ├─ Тест: регистрация → первый заказ
│  └─ Тест: админ → обработка заказа
│
├─ Оптимизация производительности
│  ├─ Lighthouse audit (цель: 90+ по всем метрикам)
│  ├─ Сжатие изображений (WebP + fallback)
│  ├─ Code splitting (ленивая загрузка компонентов)
│  └─ CDN для статики (Cloudflare R2)
│
└─ Аудит безопасности
   ├─ SQL injection (защита через Prisma)
   ├─ XSS (sanitize всех input)
   ├─ CSRF (токены в формах)
   └─ Rate limiting (макс. 100 req/min на IP)

✅ Наполнение контентом
├─ Загрузка товаров (минимум 50 товаров)
│  ├─ 3-5 фото на товар
│  ├─ SEO-оптимизированные описания
│  └─ Цены, остатки, категории
│
├─ Текстовый контент
│  ├─ Страница "О компании"
│  ├─ "Доставка и оплата"
│  ├─ "Советы по уходу" (3-5 статей)
│  └─ Контактная информация
│
└─ SEO настройки
   ├─ Мета-теги для всех страниц
   ├─ Sitemap.xml
   ├─ Robots.txt
   └─ Structured data (Schema.org для товаров)

🎯 Результаты:
├─ Приложение без критичных багов
├─ Работает на всех основных браузерах
├─ Мобильная адаптация (320px - 2560px)
└─ Контент готов к запуску

✅ Чек-лист перед запуском:
├─ [ ] Lighthouse Score: Performance 90+, SEO 95+, Accessibility 90+
├─ [ ] Все формы валидируются корректно
├─ [ ] Платежи работают (тестовый + боевой режим)
├─ [ ] Email/SMS уведомления отправляются
├─ [ ] Админка доступна только авторизованным
├─ [ ] Мобильная версия: все кнопки кликабельны, текст читается
├─ [ ] Каталог: фильтры работают, нет битых изображений
├─ [ ] Корзина: количество обновляется, итоговая сумма считается верно
└─ [ ] SSL сертификат установлен (HTTPS)
```

### Фаза 5: Деплой на продакшн (Неделя 9)
```
✅ Подготовка к запуску
├─ Настройка продакшн окружения
│  ├─ Vercel проект (подключение GitHub репозитория)
│  ├─ Переменные окружения (env vars в Vercel)
│  │  ├─ DATABASE_URL (Supabase prod)
│  │  ├─ NEXTAUTH_SECRET (случайный токен)
│  │  ├─ YUKASSA_SHOP_ID + SECRET_KEY
│  │  ├─ RESEND_API_KEY
│  │  └─ SMS_API_KEY
│  │
│  ├─ База данных
│  │  ├─ Supabase продакшн инстанс
│  │  ├─ Миграции (npx prisma migrate deploy)
│  │  └─ Seed данных (начальные категории, тестовые товары)
│  │
│  └─ CDN для медиа
│     └─ Cloudflare R2 bucket (или Vercel Blob)
│
├─ Настройка домена
│  ├─ Регистрация домена (например: flowershop.ru)
│  ├─ DNS настройки (A/CNAME записи на Vercel)
│  ├─ SSL сертификат (автоматически от Vercel)
│  └─ Редирект www → non-www (или наоборот)
│
├─ Мониторинг и аналитика
│  ├─ Vercel Analytics (встроенная аналитика)
│  ├─ Sentry (отслеживание ошибок)
│  ├─ Яндекс.Метрика (веб-аналитика для РФ)
│  └─ Uptime monitoring (UptimeRobot или Pingdom)
│
└─ CI/CD пайплайн
   ├─ GitHub Actions
   │  ├─ Автоматический деплой при push в main
   │  ├─ Запуск тестов перед деплоем
   │  └─ Линтинг и type-check
   │
   └─ Превью деплои (для каждого PR)

✅ День запуска
├─ 🚀 Финальный деплой на продакшн
├─ ✅ Финальное тестирование на боевом окружении
│  ├─ Тестовый заказ с реальной оплатой (мин. сумма)
│  ├─ Проверка email/SMS уведомлений
│  └─ Проверка админки (создание/обработка заказа)
│
├─ 📢 Анонс запуска
│  ├─ Социальные сети (Instagram, VK)
│  ├─ Email рассылка существующим клиентам
│  └─ Акция: "Скидка 20% на первый онлайн-заказ"
│
└─ 📊 Мониторинг в первые 24 часа
   ├─ Отслеживание ошибок (Sentry)
   ├─ Проверка метрик (Vercel Dashboard)
   └─ Быстрый фикс критичных багов (если появятся)

🎯 Результаты:
├─ Сайт работает на production URL
├─ Все интеграции настроены и работают
├─ Мониторинг активен
└─ Первые реальные заказы обработаны

📈 Метрики первой недели (KPI):
├─ Uptime: 99.9%
├─ Средняя скорость загрузки: < 2 сек
├─ Конверсия визит → заказ: > 2%
├─ Количество багов: < 5 (некритичных)
└─ Удовлетворённость клиентов: 4.5+ (из 5)
```

---

## 📊 Ключевые метрики и KPI

### Технические метрики
```
⚡ Производительность
├─ Время загрузки: < 2 секунд (First Contentful Paint)
├─ Time to Interactive: < 3.5 секунд
├─ Размер бандла: < 300 КБ (gzipped)
└─ Lighthouse Score: 90+ по всем категориям
   ├─ Performance: 90+
   ├─ Accessibility: 90+
   ├─ Best Practices: 95+
   └─ SEO: 95+

📱 Адаптивность
├─ Mobile-First: 100% адаптивная вёрстка
├─ Минимальное разрешение: 320px
├─ Тестирование на устройствах:
│  ├─ iPhone 12/13/14
│  ├─ Samsung Galaxy S21/S22
│  └─ iPad/Планшеты
└─ Touch-friendly: размер кнопок минимум 44x44px
```

### Бизнес-метрики
```
🛒 Конверсия и продажи
├─ Конверсия (визит → заказ): > 3% (цель)
├─ Процент брошенных корзин: < 60%
├─ Средний чек: 3 500₽ - 5 000₽
├─ Повторные покупки: > 30% клиентов
└─ Время на оформление заказа: < 3 минут

⭐ Удовлетворённость клиентов
├─ NPS (Net Promoter Score): > 50
├─ Рейтинг сайта: > 4.5/5
├─ Процент положительных отзывов: > 85%
└─ Жалобы на UX: < 5% от всех отзывов

📈 Рост и вовлечённость
├─ Прирост новых клиентов: +20% месяц к месяцу
├─ Активные пользователи: 70% возвращаются в течение месяца
├─ Среднее время на сайте: > 5 минут
└─ Глубина просмотра: > 3 страницы за сессию
```

### Технические метрики качества
```
✅ Покрытие тестами
├─ Unit тесты: > 80% покрытие кода
├─ Integration тесты: критичные API эндпоинты
└─ E2E тесты: основные user flows (чекаут, регистрация)

🐛 Качество кода
├─ Bug density: < 1 бага на 1000 строк кода
├─ Code smells: 0 (по результатам SonarQube)
└─ TypeScript errors: 0 (строгий режим)

🔒 Безопасность
├─ Security score: A+ (Mozilla Observatory)
├─ Уязвимости: 0 критичных, 0 высоких
└─ SSL: A+ рейтинг (SSL Labs)

♿ Доступность
├─ WCAG 2.1 AA compliance: 100%
├─ Screen reader friendly: полная поддержка
└─ Keyboard navigation: все функции доступны с клавиатуры
```

---

## 🎯 Критерии успеха проекта

### Функциональность
```
✅ Обязательные требования
├─ Все фичи из ТЗ реализованы и работают
├─ Нет критических багов
├─ Работает на основных браузерах
│  ├─ Chrome (последние 2 версии)
│  ├─ Safari (последние 2 версии)
│  ├─ Firefox (последние 2 версии)
│  └─ Edge (последние 2 версии)
│
└─ Адаптивность
   ├─ Мобильные (320px - 767px)
   ├─ Планшеты (768px - 1023px)
   └─ Десктоп (1024px+)
```

### Производительность
```
⚡ Скорость и оптимизация
├─ Загрузка главной страницы < 2 сек
├─ Плавные анимации (60 FPS)
├─ Оптимизированные изображения
│  ├─ WebP с JPEG fallback
│  ├─ Lazy loading
│  └─ Максимум 200 КБ на изображение
│
└─ Кэширование
   ├─ Статика: 1 год (immutable)
   ├─ Каталог товаров: 5 минут (ISR)
   └─ Сессии пользователей: Redis
```

### Безопасность
```
🔒 Защита данных
├─ SQL injection: защита через Prisma ORM
├─ CSRF: токены во всех формах
├─ XSS: sanitize всех пользовательских input
├─ Безопасная обработка платежей
│  ├─ PCI DSS compliance (через ЮKassa)
│  ├─ 3D Secure для карт
│  └─ Шифрование данных в transit (HTTPS)
│
└─ Аутентификация
   ├─ Bcrypt для паролей (12 rounds)
   ├─ JWT токены с коротким lifetime
   └─ Rate limiting (защита от brute-force)
```

### User Experience
```
✨ Удобство использования
├─ Интуитивная навигация
│  ├─ Понятные категории
│  ├─ Хлебные крошки
│  └─ Поиск с автодополнением
│
├─ Чёткие CTA (Call-to-Action)
│  ├─ Контрастные кнопки
│  ├─ Понятный текст ("Купить", "В корзину")
│  └─ Визуальная иерархия (главное — крупнее)
│
├─ Простой чекаут (< 5 кликов)
│  ├─ Гостевой заказ (без регистрации)
│  ├─ Автозаполнение адреса
│  └─ Быстрая оплата (Apple Pay, Google Pay)
│
└─ Доступность для всех
   ├─ Контраст текста (WCAG AA)
   ├─ Поддержка screen readers
   └─ Управление с клавиатуры
```

---

## 📞 Контакты и поддержка

### Команда проекта
```
👔 Project Manager: [Имя]
   ├─ Email: [email@example.com]
   └─ Telegram: @username

💻 Lead Developer: [Имя]
   ├─ Email: dev@example.com
   └─ GitHub: @username

🎨 UI/UX Designer: [Имя]
   └─ Email: design@example.com
```

### Ресурсы
```
📦 Репозиторий: [GitHub URL]
🌐 Staging: https://staging.flowershop.ru
🚀 Production: https://flowershop.ru
📊 Админка: https://flowershop.ru/admin
```

### Техническая поддержка
```
🐛 Сообщить о баге: [GitHub Issues]
💡 Запросить фичу: [Feature Request Form]
📧 Общие вопросы: support@example.com
📞 Срочная поддержка: +7 (xxx) xxx-xx-xx (9:00-21:00 МСК)
```

---

## 📚 Источники и исследования

**Дизайн-тренды 2026:**
- [Florist & Flower Shop Websites: 30+ Inspiring Examples](https://www.sitebuilderreport.com/inspiration/florist-and-flower-shop-websites)
- [Best Flower Shop Websites of 2026 | 41 Examples](https://mycodelesswebsite.com/flower-shop-website/)
- [UI/UX Design Trends to Watch Out for in 2026](https://www.bighuman.com/blog/top-ui-ux-design-trends)
- [UX/UI Design Trends 2026: 11 Essentials](https://www.promodo.com/blog/key-ux-ui-design-trends)
- [10 UX/UI Trends That Will Completely Redefine Design in 2026](https://medium.com/@sainisinghramandeep/10-ux-ui-trends-that-will-completely-redefine-design-in-2026-most-designers-arent-ready-b26d4bb5de86)

**Best Practices:**
- [How to Make a Flower Store Website: 2026 Guide](https://elementor.com/blog/flower-store-website/)
- [Florist Website Design Examples](https://www.sliderrevolution.com/design/florist-websites/)
- [The Best Florist Website Design Examples](https://muffingroup.com/blog/florist-websites/)

---

**Версия документа**: 1.0
**Последнее обновление**: Январь 2026
**Статус**: Этап планирования — готов к презентации заказчику
