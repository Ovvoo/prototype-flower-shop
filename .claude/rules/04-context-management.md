# Управление контекстом

## Ключевое ограничение

Context window заполняется быстро → производительность падает.

## Команды

| Команда | Действие |
|---------|----------|
| `/clear` | Сбросить контекст |
| `/compact` | Сжать историю |
| `/memory` | Редактировать CLAUDE.md |
| `/rewind` или `Esc×2` | Откатить состояние |
| `#` | Добавить в CLAUDE.md |

## Subagents для исследований

```
Используй subagent для исследования как работает аутентификация
```

Subagent работает в отдельном контексте, возвращает краткий результат.

## Типичные ошибки

### Kitchen Sink Session
Начать задачу → переключиться → вернуться.
**Решение**: `/clear` между задачами.

### Многократные коррекции
Claude ошибается → коррекция → снова ошибается.
**Решение**: После 2 попыток — `/clear` + новый промпт.

### Раздутый CLAUDE.md
Слишком длинный файл, Claude игнорирует правила.
**Решение**: Только то, что влияет на ошибки.

## Auto-compaction

Настрой в CLAUDE.md:
```
При compaction сохранять:
- Список изменённых файлов
- Команды для тестов
```
